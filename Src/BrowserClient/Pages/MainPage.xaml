<Page
    x:Class="LinesBrowser.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:LinesBrowser"
    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" SizeChanged="Page_SizeChanged">

    <Page.Resources>
        <Style x:Key="CenterTextBoxStyle" x:Name="CenterTextBoxStyle" TargetType="TextBox">
            <Setter Property="MinWidth" Value="{ThemeResource TextControlThemeMinWidth}"/>
            <Setter Property="MinHeight" Value="{ThemeResource TextControlThemeMinHeight}"/>
            <Setter Property="Foreground" Value="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
            <Setter Property="Background" Value="{ThemeResource SystemControlBackgroundAltHighBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource SystemControlForegroundChromeDisabledLowBrush}"/>
            <Setter Property="SelectionHighlightColor" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
            <Setter Property="BorderThickness" Value="{ThemeResource TextControlBorderThemeThickness}"/>
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollMode" Value="Auto"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
            <Setter Property="Padding" Value="{ThemeResource TextControlThemePadding}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <Grid.Resources>
                                <Style x:Name="DeleteButtonStyle" TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Grid x:Name="ButtonLayoutGrid" BorderBrush="{ThemeResource TextBoxButtonBorderThemeBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{ThemeResource TextBoxButtonBackgroundThemeBrush}">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal"/>
                                                            <VisualState x:Name="PointerOver">
                                                                <Storyboard>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="GlyphElement">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Pressed">
                                                                <Storyboard>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" 
                                                                                                   Storyboard.TargetName="ButtonLayoutGrid">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" 
                                                                                                Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <ObjectAnimationUsingKeyFrames 
                                                                        Storyboard.TargetProperty="Foreground"
                                                                        Storyboard.TargetName="GlyphElement">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" 
                                                                                                Value="{ThemeResource SystemControlHighlightAltChromeWhiteBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" 
                                                                                     Storyboard.TargetName="ButtonLayoutGrid"/>
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <TextBlock x:Name="GlyphElement" AutomationProperties.AccessibilityView="Raw" 
                                                               Foreground="{ThemeResource SystemControlForegroundChromeBlackMediumBrush}" 
                                                               FontStyle="Normal" FontSize="12" FontFamily="{ThemeResource SymbolThemeFontFamily}" HorizontalAlignment="Center" Text="&#xE10A;" VerticalAlignment="Center"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Grid.Resources>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="HeaderContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BackgroundElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BorderElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledChromeDisabledLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="PlaceholderTextContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledChromeDisabledLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightChromeAltLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundHoverOpacity}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="PlaceholderTextContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlPageTextChromeBlackMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BackgroundElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundChromeWhiteBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundFocusedOpacity}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAccentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlForegroundChromeBlackHighBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="RequestedTheme" Storyboard.TargetName="ContentElement">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Light"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ButtonStates">
                                    <VisualState x:Name="ButtonVisible">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DeleteButton">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="ButtonCollapsed"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="BackgroundElement" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" Margin="{TemplateBinding BorderThickness}" Opacity="{ThemeResource TextControlBackgroundRestOpacity}" Grid.Row="1" Grid.RowSpan="1"/>
                            <Border x:Name="BorderElement" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Grid.ColumnSpan="2" Grid.Row="1" Grid.RowSpan="1"/>
                            <ContentPresenter x:Name="HeaderContentPresenter" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}" FontWeight="Normal" Margin="0,0,0,8" Grid.Row="0" Visibility="Collapsed" x:DeferLoadStrategy="Lazy"/>
                            <ScrollViewer x:Name="ContentElement" VerticalAlignment="Center" AutomationProperties.AccessibilityView="Raw" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.Row="1" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled"/>
                            <ContentControl x:Name="PlaceholderTextContentPresenter" VerticalAlignment="Center" Grid.ColumnSpan="2" Content="{TemplateBinding PlaceholderText}" Foreground="{ThemeResource SystemControlPageTextBaseMediumBrush}" IsHitTestVisible="False" IsTabStop="False" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.Row="1"/>
                            <Button x:Name="DeleteButton" BorderThickness="{TemplateBinding BorderThickness}" Grid.Column="1" FontSize="{TemplateBinding FontSize}" IsTabStop="False" Margin="{ThemeResource HelperButtonThemePadding}" MinWidth="34" Grid.Row="1" Style="{StaticResource DeleteButtonStyle}" Visibility="Collapsed" VerticalAlignment="Stretch"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Storyboard x:Name="SettingsLinksGridStoryboardShow">
            <DoubleAnimation x:Name="SettingsLinksGridShow" Storyboard.TargetName="SettingsLinksGridTransform"
                    Storyboard.TargetProperty="Y"
                    To="0"
                    Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <ExponentialEase Exponent="6"  EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            
        </Storyboard>
        <Storyboard x:Name="SettingsLinksGridStoryboardHide">
            <DoubleAnimation x:Name="SettingsLinksGridHide" Storyboard.TargetName="SettingsLinksGridTransform"
                Storyboard.TargetProperty="Y"
                From="0"
                To="300"
                Duration="0:0:0.2"
                Completed="SettingsLinksGridHide_Completed">
                <DoubleAnimation.EasingFunction>
                    <ExponentialEase Exponent="6"  EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

        </Storyboard>
        <Storyboard x:Name="NavBarStoryboardShow">
            <DoubleAnimation x:Name="NavBarShow" Storyboard.TargetName="NavBarGridTransform"
                             Storyboard.TargetProperty="Y" 
                             From="50"
                             To="0"
                             Duration="0:0:0.2"
                             >
                <DoubleAnimation.EasingFunction>
                    <ExponentialEase Exponent="6" EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
                
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Name="NavBarStoryboardHide">
            <DoubleAnimation x:Name="NavBarHide" Storyboard.TargetName="NavBarGridTransform"
                             Storyboard.TargetProperty="Y" 
                             From="0"
                             To="50"
                             Duration="0:0:0.2"
                             Completed="NavBarHide_Completed"
                             >
                <DoubleAnimation.EasingFunction>
                    <ExponentialEase Exponent="6" EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>

            </DoubleAnimation>
        </Storyboard>
    </Page.Resources>

    <Grid Name="mainGrid" SizeChanged="MainGrid_SizeChanged">
        <Grid Name="browser" SizeChanged="Browser_SizeChanged">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="50"/>
            </Grid.RowDefinitions>

            <Image Grid.Row="0" Name="test" HorizontalAlignment="Stretch" 
                   Margin="0,0,0,0" VerticalAlignment="Stretch" PointerPressed="Test_PointerPressed" 
                   PointerReleased="Test_PointerReleased" PointerMoved="Test_PointerMoved"
                   Visibility="Visible"/>

            <ScrollViewer  Grid.Row="0" x:Name="ScreenshotScrollViewer" Visibility="Collapsed" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Image x:Name="ScreenshotImage" Stretch="UniformToFill" />
            </ScrollViewer>

            <TextBox Grid.Row="1" Visibility="Collapsed" Name="urlBar" HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Bottom" PlaceholderText="Navigate or search" KeyDown="TextBox_KeyDown" IsTextPredictionEnabled="False" Background="{ThemeResource SystemControlBackgroundAccentBrush}" InputScope="Url" />
            <Rectangle Grid.Row="0" Name="ScaleRect" />
            <Grid Name="TextInput" Visibility="Collapsed" VerticalAlignment="Bottom">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="43*"/>
                    <ColumnDefinition Width="267*"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <Rectangle Margin="0,0,0,0" Fill="{ThemeResource SystemControlBackgroundAccentBrush}" Grid.ColumnSpan="2"/>

                <TextBox Name="websiteTextBox" Text="" Grid.Column="0" PlaceholderText="Compose text and press enter to commit" 
                         Grid.ColumnSpan="2" Margin="0,0,0,0" KeyUp="WebsiteTextBox_KeyUp" TextChanged="WebsiteTextBox_TextChanged" />
                <Button Visibility="Collapsed" Name="SendText" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="2" Width="50" Background="{ThemeResource SystemControlBackgroundAccentBrush}" Margin="0,0,0,0" Click="SendText_Click">
                    <Image IsHitTestVisible="False" Source="Assets/send.png"/>
                </Button>

            </Grid>
        </Grid>
        <MediaPlayerElement
            x:Name="TestMediaPlayerElement"
            AutoPlay="True"
            AreTransportControlsEnabled="False"
            Stretch="None"
            Height="200" Width="300" Visibility="Collapsed"/>
        <Grid x:Name="TabsGrid" Visibility="Collapsed" Padding="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <StackPanel x:Name="TabsPageHeader">
                <local:UTextBlock x:Uid="Tabs" Text="TABS" FontWeight="SemiBold" Margin="10 10 0 0"/>
            </StackPanel>
            <GridView Grid.Row="2" x:Name="TabsList" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                          IsItemClickEnabled="True" ItemClick="TabsList_ItemClick" SelectionMode="None" Padding="10 0 10 0">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid x:Name="TabsSizedWrapGrid" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Border Width="200" Height="150" Margin="0" BorderBrush="Transparent" BorderThickness="1" 
                                ToolTipService.ToolTip="{Binding Url}" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="5"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Url}" TextWrapping="NoWrap" 
                                               FontSize="12" Margin="5" MaxHeight="20" Height="20">
                                    </TextBlock>
                                    <Button x:Name="CloseTabButton" Grid.Column="2" 
                                            Background="Transparent" Padding="7 5" Click="CloseTabButton_Click">
                                        <Button.Content>
                                            <FontIcon Glyph="&#xE711;" />
                                        </Button.Content>
                                    </Button>
                                </Grid>
                                <Image Source="{Binding Screenshot}" HorizontalAlignment="Stretch" Height="180" Stretch="UniformToFill" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
            <CommandBar Grid.Row="3">
                <CommandBar.PrimaryCommands>
                    <AppBarButton x:Uid="NewTab" x:Name="AddNewTabButton" Icon="Add" Label="New tab" Click="AddNewTabButton_Click"/>

                    <AppBarButton x:Uid="Close" Label="Close" Click="CloseTabsPageButton_Click">
                        <AppBarButton.Content>
                            <StackPanel>
                                <FontIcon Glyph="&#xE711;" />
                            </StackPanel>
                        </AppBarButton.Content>
                    </AppBarButton>
                </CommandBar.PrimaryCommands>
            </CommandBar>
        </Grid>
        <Canvas x:Name="OverlayFocus" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Collapsed" Canvas.ZIndex="1"
                Tapped="OverlayFocus_Tapped">
            <Rectangle x:Name="OverlayFocusRectangle" Fill="#000000" Width="1000" Height="1000" Opacity="0.8"/>
        </Canvas>
        <Canvas x:Name="OverlaySettingsLinks" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Visible" Canvas.ZIndex="99" >
            <Grid x:Name="OverlaySettingsLinksGrid" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                <Grid x:Name="SettingsLinksGrid" RenderTransformOrigin="0.5,1">
                    <Grid.RenderTransform>
                        <TranslateTransform x:Name="SettingsLinksGridTransform" Y="300" />
                    </Grid.RenderTransform>
                    <Rectangle Grid.Column="0" Fill="#2B2B2B" 
                         HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="auto"/>
                    <ScrollViewer x:Name="SettingsLinksScrollView" HorizontalScrollMode="Disabled" VerticalScrollBarVisibility="Auto" MaxHeight="300">
                        <StackPanel Padding="0 10 0 10">
                            <Button x:Name="BackButton" HorizontalAlignment="Stretch" Height="45" HorizontalContentAlignment="Left" 
                                    Background="Transparent" Padding="10" Click="NavigateBack_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE72B;" />
                                        <TextBlock x:Uid="Back" Text="Back" Margin="10 0 0 0"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            <Button x:Name="ForwardButton" HorizontalAlignment="Stretch" Height="45" HorizontalContentAlignment="Left" 
                                    Background="Transparent" Padding="10" Click="NavigateForward_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE72A;" />
                                        <TextBlock x:Uid="Forward" Text="Forward" Margin="10 0 0 0"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            <Button x:Name="HomePageButton" HorizontalAlignment="Stretch" Height="45" HorizontalContentAlignment="Left" 
                                    Background="Transparent" Padding="10" Click="HomePageButton_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE80F;" />
                                        <TextBlock x:Uid="Home" Text="Home" Margin="10 0 0 0"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>
                            <Rectangle Fill="{ThemeResource AppBarSeparatorForegroundThemeBrush}" Height="2" Margin="10 4"/>
                            <Button x:Name="SettingsPageButton" HorizontalAlignment="Stretch" Height="45" HorizontalContentAlignment="Left" 
                                Background="Transparent" Padding="10" Click="SettingsPageButton_Click">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE713;" />
                                        <TextBlock x:Uid="Settings" Text="Settings" Margin="10 0 0 0"/>
                                    </StackPanel>
                                </Button.Content>
                            </Button>

                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Grid>
        </Canvas>
        <Canvas  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Canvas.ZIndex="100">
            <Grid Grid.Row="1" Name="NavbarGrid" Height="50" Canvas.ZIndex="100">
                <Grid.RenderTransform>
                    <TranslateTransform x:Name="NavBarGridTransform" Y="0" />
                </Grid.RenderTransform>
                <Grid x:Name="MainNavBar">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Rectangle Grid.Column="0" Fill="{ThemeResource SystemControlBackgroundChromeMediumBrush}" 
                               HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="50"/>
                    <Grid Grid.Column="0" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>

                        <Button x:Uid="Pages" Name="ViewPages" Width="50" Grid.Column="0" HorizontalAlignment="Stretch" 
                                Margin="0,0,0,0" VerticalAlignment="Stretch" Click="ViewPages_Click"
                                Background="Transparent" ToolTipService.ToolTip="View pages">
                            <FontIcon Glyph="&#xE7C4;" />
                        </Button>
                        <Rectangle Grid.Column="2" Fill="{ThemeResource AppBarSeparatorForegroundThemeBrush}" Width="2" Height="20" 
                                   VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        <Button x:Name="ConnectionPreviewButton" Grid.Column="3" Height="50" Background="Transparent" Visibility="Collapsed">
                            <Button.Content>
                                <FontIcon x:Name="ConnectionStatusFontIcon" Glyph="&#xE72E;" FontSize="15"/>
                            </Button.Content>
                        </Button>
                        <ProgressRing x:Name="PageLoadingRing" Grid.Column="3" Width="20" Height="20" IsActive="True" Margin="0 0 5 0"/>
                        <ScrollViewer Grid.Column="4" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Hidden" Tapped="urlViewField_Tapped">
                            <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                  Margin="0" Tapped="urlViewField_Tapped">
                                 <TextBlock Name="urlViewField" Grid.Column="3" Visibility="Visible" 
                                 Margin="0,0,0,0" VerticalAlignment="Center" 
                                 Tapped="urlViewField_Tapped" HorizontalAlignment="Stretch" 
                                 >
                                </TextBlock>
                            </Border>
                        </ScrollViewer>
                        <Rectangle Grid.Column="5" Fill="{ThemeResource AppBarSeparatorForegroundThemeBrush}" Width="2" Height="20" 
                                   VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        <Button x:Uid="DisplayMore" Name="More" Width="50" Grid.Column="6" HorizontalAlignment="Stretch" 
                            Margin="0,0,0,0" VerticalAlignment="Stretch" Click="More_Click"
                            Background="Transparent" ToolTipService.ToolTip="Display more settings">
                            <FontIcon Glyph="&#xE712;" />
                        </Button>
                    </Grid>
                </Grid>
            </Grid>
        </Canvas>
        <Canvas x:Name="OverlayMoreSettingsCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Visible" Canvas.ZIndex="100" >
            <Grid x:Name="MoreSettingsGrid" Height="100">
                <Rectangle Grid.Column="0" Fill="{ThemeResource SystemControlBackgroundChromeMediumBrush}" 
                           HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="auto"/>
                <StackPanel x:Name="MoreSettingsAppBar" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                    <AppBarToggleButton x:Uid="StaticMode" x:Name="StaticModeToggleButton" Label="Static mode" Click="StaticModeToggleButton_Click">
                        <AppBarToggleButton.Icon>
                            <FontIcon Glyph="&#xE704;" />
                        </AppBarToggleButton.Icon>
                    </AppBarToggleButton>
                </StackPanel>

            </Grid>
        </Canvas>
        <Canvas x:Name="OverlayCanvas" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Canvas.ZIndex="101" >
            <Grid x:Name="EntryNavBar" Visibility="Collapsed" Height="50" Width="Auto" 
                  Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}">
                <TextBox Name="urlField" HorizontalAlignment="Stretch" Margin="5" VerticalAlignment="Stretch" 
                     PlaceholderText="Navigate or search" KeyDown="TextBox_KeyDown" 
                     IsTextPredictionEnabled="False" Background="{ThemeResource SystemControlBackgroundAccentBrush}" 
                     InputScope="Url" LostFocus="urlField_LostFocus" Style="{x:Bind CenterTextBoxStyle}" 
                     BorderThickness="0"/>
            </Grid>
        </Canvas>


        <StackPanel Name="ConnectPage" Visibility="Visible" VerticalAlignment="Center">
            <Button Name="connectBtn" Content="Connect" HorizontalAlignment="Center" Margin="0,0,0,0" VerticalAlignment="Center" Click="Button_Click"/>
            <Button Name="discoverBtn" Content="Discover" HorizontalAlignment="Center" Margin="0,0,0,0" VerticalAlignment="Center" Click="DiscoverBtn_Click"/>
            <TextBox Name="serverAddress" HorizontalAlignment="Stretch" Margin="50,0,50,0" Text="ws://server:8081" VerticalAlignment="Center" 
                     IsTextPredictionEnabled="False" InputScope="Url" PlaceholderText="ws://server:8081"/>
            <TextBox Name="audioAddress" HorizontalAlignment="Stretch" Margin="50,0,50,0" Text="ws://server:8082" VerticalAlignment="Center" 
                     IsTextPredictionEnabled="False" InputScope="Url" PlaceholderText="ws://server:8082"/>
        </StackPanel>
        <Grid Name="DiscoveryPage" Visibility="Collapsed">
            <Rectangle Name="dicoverRect" HorizontalAlignment="Stretch" Margin="0,0,0,0" VerticalAlignment="Stretch" 
                       Fill="{ThemeResource SystemControlForegroundAccentBrush}"/>
            <TextBlock HorizontalAlignment="Center" Margin="0,0,0,0" VerticalAlignment="Center" Text="discovering, please wait.." />

        </Grid>
    </Grid>
</Page>
